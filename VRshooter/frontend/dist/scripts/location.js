const startLatDiv=document.getElementById("start-lat"),startLonDiv=document.getElementById("start-lon"),currentLatDiv=document.getElementById("current-lat"),currentLonDiv=document.getElementById("current-lon"),stabalizedLatDiv=document.getElementById("stabalized-lat"),stabalizedLonDiv=document.getElementById("stabalized-lon"),distanceLatDiv=document.getElementById("distance-lat"),distanceLonDiv=document.getElementById("distance-lon"),distanceTotalDiv=document.getElementById("distance-total"),staticOverlay=document.getElementById("static-overlay"),outofboundsWarning=document.getElementById("outofbounds-warning-container"),gpsIdentifier=document.getElementById("gps-identifier");let currentLat,currentLon,startLat,startLon,distanceFromHotspotTotal,distanceFromHotspotLon,distanceFromHotspotLat,stabilizedCoords;const radius=10;let positionsList=[];const geolocationOptions={enableHighAccuracy:!0,timeout:1e3,maximumAge:0};function initLocation(){navigator.geolocation?(navigator.geolocation.getCurrentPosition(startPosition),navigator.geolocation.watchPosition(currentLocation,locationError,geolocationOptions),setTimeout((()=>{navigator.geolocation.getCurrentPosition(startPosition)}),"3000")):alert("This device does not support the required geolocation functions for this app to work properly. For best results see FAQ section.")}function startPosition(t){startLat=t.coords.latitude,startLon=t.coords.longitude,startLatDiv.innerHTML="start lat "+startLat,startLonDiv.innerHTML="start lon "+startLon}function calculatePIP(t,o){gpsIdentifier.style.top=`${convertRange(t)}%`,gpsIdentifier.style.left=`${convertRange(o)}%`,gpsIdentifier.style.transform=`translate(-${convertRange(t)}%, -${convertRange(o)}%)`}function convertRange(t,o=-10,e=10,n=0,a=100){return(t-o)/(e-o)*(a-n)+n}function currentLocation(t){positionsList.push(t),positionsList.length>5&&positionsList.shift(),stabilizedCoords=stabilizeCoordinates(positionsList),currentLat=stabilizedCoords.latitude,currentLon=stabilizedCoords.longitude,distanceFromHotspotLat=calculateLatitudeDistance(startLat,currentLat),distanceFromHotspotLon=calculateLongitudeDistance(startLon,currentLon,currentLat),calculatePIP(distanceFromHotspotLat,distanceFromHotspotLon),distanceFromHotspotTotal=calculateTotalDistance(distanceFromHotspotLon,distanceFromHotspotLat),distanceFromHotspotTotal>10?($("#slide-GPS > .slide-item-info ").html("You are outside the radius. Distance from center: "+distanceFromHotspotTotal.toFixed(2)+"m"),staticOverlay.style.opacity="1",outofboundsWarning.style.opacity="1"):distanceFromHotspotTotal>8?($("#slide-GPS > .slide-item-info ").html("You are inside the radius. Distance from center: "+distanceFromHotspotTotal.toFixed(2)+"m"),staticOverlay.style.opacity=""+distanceFromHotspotLat/10,outofboundsWarning.style.opacity=""+distanceFromHotspotLat/10):($("#slide-GPS > .slide-item-info ").html("You are inside the radius. Distance from center: "+distanceFromHotspotTotal.toFixed(2)+"m"),staticOverlay.style.opacity="0",outofboundsWarning.style.opacity="0"),currentLatDiv.innerHTML="current Latitude: "+t.coords.latitude,currentLonDiv.innerHTML="current Longitude: "+t.coords.longitude,distanceLatDiv.innerHTML="distance Latitude: "+distanceFromHotspotLon,distanceLonDiv.innerHTML="distance Longitude: "+distanceFromHotspotLat,distanceTotalDiv.innerHTML="distance Total: "+distanceFromHotspotTotal}function locationError(t){switch(console.log("Location error: ",t),t.code){case t.PERMISSION_DENIED:alert("User denied the request for Geolocation.");break;case t.POSITION_UNAVAILABLE:alert("Location information is unavailable.");break;case t.TIMEOUT:break;case t.UNKNOWN_ERROR:alert("An unknown error occurred.")}}function calculateLatitudeDistance(t,o){return 6371e3*deg2rad(o-t)}function calculateLongitudeDistance(t,o,e){var n=deg2rad(o-t),a=Math.sin(n/2)*Math.sin(n/2)*Math.cos(deg2rad(e))*Math.cos(deg2rad(e)),i=6371e3*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)));return o<t&&(i*=-1),i}function calculateTotalDistance(t,o){return Math.sqrt(Math.pow(t,2)+Math.pow(o,2))}function convertLonLatToXY(t,o){const e=6371e3;return{x:t*Math.PI/180*e*Math.cos(o*Math.PI/180),y:o*Math.PI/180*e}}function deg2rad(t){return t*(Math.PI/180)}function stabilizeCoordinates(t){for(var o={latitude:0,longitude:0},e=0;e<t.length;e++)o.latitude+=t[e].coords.latitude,o.longitude+=t[e].coords.longitude;return o.latitude/=t.length,o.longitude/=t.length,stabalizedLatDiv.innerHTML="stabalized Latitude: "+o.latitude,stabalizedLonDiv.innerHTML="stabalized Longitude: "+o.longitude,o}