const startLatDiv=document.getElementById("start-lat"),startLonDiv=document.getElementById("start-lon"),currentLatDiv=document.getElementById("current-lat"),currentLonDiv=document.getElementById("current-lon"),stabalizedLatDiv=document.getElementById("stabalized-lat"),stabalizedLonDiv=document.getElementById("stabalized-lon"),distanceLatDiv=document.getElementById("distance-lat"),distanceLonDiv=document.getElementById("distance-lon");let currentLat,currentLon,startLat,startLon,distanceFromHotspot,stabilizedCoords,positionsList=[];function initLocation(){navigator.geolocation?(navigator.geolocation.getCurrentPosition(startPosition),navigator.geolocation.watchPosition(currentLocation)):alert("This device does not support the required geolocation functions for this app to work properly. For best results see FAQ section.")}function startPosition(t){startLat=t.coords.latitude,startLon=t.coords.longitude,startLatDiv.innerHTML="start lat "+startLat,startLonDiv.innerHTML="start lon "+startLon}function currentLocation(t){positionsList.push(t),positionsList.length>5&&positionsList.shift(),stabilizedCoords=stabilizeCoordinates(positionsList),currentLat=stabilizedCoords.latitude,currentLon=stabilizedCoords.longitude,distanceFromHotspot=getDistanceFromLatLonInM(stabilizedCoords.latitude,stabilizedCoords.longitude,startLat,startLon),currentLatDiv.innerHTML="current Latitude: "+currentLat,currentLonDiv.innerHTML="current Longitude: "+currentLon,distanceLatDiv.innerHTML="distance Latitude: "+distanceFromHotspot,distanceLonDiv.innerHTML="distance Longitude: "+distanceFromHotspot}function getDistanceFromLatLonInM(t,n,e,i){var o=deg2rad(e-t),a=deg2rad(i-n),r=Math.sin(o/2)*Math.sin(o/2)+Math.cos(deg2rad(t))*Math.cos(deg2rad(e))*Math.sin(a/2)*Math.sin(a/2);return 6371e3*(2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)))}function deg2rad(t){return t*(Math.PI/180)}function stabilizeCoordinates(t){for(var n={latitude:0,longitude:0},e=0;e<t.length;e++)n.latitude+=t[e].coords.latitude,n.longitude+=t[e].coords.longitude;return n.latitude/=t.length,n.longitude/=t.length,stabalizedLatDiv.innerHTML="stabalized Latitude: "+n.latitude,stabalizedLonDiv.innerHTML="stabalized Longitude: "+n.longitude,n}