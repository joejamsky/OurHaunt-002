const startLatDiv=document.getElementById("start-lat"),startLonDiv=document.getElementById("start-lon"),currentLatDiv=document.getElementById("current-lat"),currentLonDiv=document.getElementById("current-lon"),stabalizedLatDiv=document.getElementById("stabalized-lat"),stabalizedLonDiv=document.getElementById("stabalized-lon"),distanceLatDiv=document.getElementById("distance-lat"),distanceLonDiv=document.getElementById("distance-lon"),distanceTotalDiv=document.getElementById("distance-total");let currentLat,currentLon,startLat,startLon,distanceFromHotspotTotal,distanceFromHotspotLon,distanceFromHotspotLat,stabilizedCoords;const radius=10;let positionsList=[];const geolocationOptions={enableHighAccuracy:!0,maximumAge:0};function initLocation(){navigator.geolocation?(navigator.geolocation.getCurrentPosition(startPosition),navigator.geolocation.watchPosition(currentLocation,locationError,geolocationOptions),setTimeout((()=>{navigator.geolocation.getCurrentPosition(startPosition)}),"3000")):alert("This device does not support the required geolocation functions for this app to work properly. For best results see FAQ section.")}function startPosition(t){startLat=t.coords.latitude,startLon=t.coords.longitude,startLatDiv.innerHTML="start lat "+startLat,startLonDiv.innerHTML="start lon "+startLon}function currentLocation(t){currentLatDiv.innerHTML="current Latitude: "+t.coords.latitude,currentLonDiv.innerHTML="current Longitude: "+t.coords.longitude,positionsList.push(t),positionsList.length>5&&positionsList.shift(),stabilizedCoords=stabilizeCoordinates(positionsList),currentLat=stabilizedCoords.latitude,currentLon=stabilizedCoords.longitude,distanceLatDiv.innerHTML="distance Latitude: "+distanceFromHotspotLon,distanceLonDiv.innerHTML="distance Longitude: "+distanceFromHotspotLat,distanceTotalDiv.innerHTML="distance Total: "+distanceFromHotspotTotal,distanceFromHotspotLat=calculateLatitudeDistance(startLat,currentLat),distanceFromHotspotLon=calculateLongitudeDistance(startLon,currentLon,currentLat),distanceFromHotspotTotal=calculateTotalDistance(distanceFromHotspotLon,distanceFromHotspotLat),distanceFromHotspotTotal<=10?$("#slide-GPS > .slide-item-info ").html("You are inside the radius. Distance from center: "+distanceFromHotspotTotal.toFixed(2)+"m"):$("#slide-GPS > .slide-item-info ").html("You are outside the radius. Distance from center: "+distanceFromHotspotTotal.toFixed(2)+"m")}function locationError(){switch(error.code){case error.PERMISSION_DENIED:alert("User denied the request for Geolocation.");break;case error.POSITION_UNAVAILABLE:alert("Location information is unavailable.");break;case error.TIMEOUT:alert("The request to get user location timed out.");break;case error.UNKNOWN_ERROR:alert("An unknown error occurred.")}}function calculateLatitudeDistance(t,o){var e=deg2rad(o-t),a=Math.sin(e/2)*Math.sin(e/2);return 6371e3*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))}function calculateLongitudeDistance(t,o,e){var a=deg2rad(o-t),n=Math.sin(a/2)*Math.sin(a/2)*Math.cos(deg2rad(e))*Math.cos(deg2rad(e));return 6371e3*(2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n)))}function calculateTotalDistance(t,o){return Math.sqrt(Math.pow(t,2)+Math.pow(o,2))}function deg2rad(t){return t*(Math.PI/180)}function stabilizeCoordinates(t){for(var o={latitude:0,longitude:0},e=0;e<t.length;e++)o.latitude+=t[e].coords.latitude,o.longitude+=t[e].coords.longitude;return o.latitude/=t.length,o.longitude/=t.length,stabalizedLatDiv.innerHTML="stabalized Latitude: "+o.latitude,stabalizedLonDiv.innerHTML="stabalized Longitude: "+o.longitude,o}