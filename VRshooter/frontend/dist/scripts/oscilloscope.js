const audioFileUrl="../assets/audio/ImperialMarch60.wav",audioContext=new(window.AudioContext||window.webkitAudioContext);let oscilloscopeActive=!1;function renderOscilloscope(e){const o=document.getElementById("oscilloscope-svg"),t=o.clientWidth,l=o.clientHeight;console.log("width",t),console.log("height",l),o.innerHTML="";const i=document.createElementNS("http://www.w3.org/2000/svg","polyline");i.setAttribute("fill","none"),i.setAttribute("stroke","white"),i.setAttribute("stroke-width","1"),o.appendChild(i);const c=audioContext.createAnalyser();c.fftSize=256;const s=audioContext.createBufferSource();console.log("audioBuffer",e),s.buffer=e,s.connect(c),console.log("analyserNode2",c);const n=()=>{const e=new Float32Array(c.fftSize);c.getFloatTimeDomainData(e);const o=Math.floor(e.length/t),s=l/2;let a="";for(let i=0;i<t;i++){const t=(i+1)*o;let c=0;for(let l=i*o;l<t;l++){const o=Math.abs(e[l]);c=Math.max(c,o)}a+=`${i},${l/2-c*s} `}i.setAttribute("points",a),"running"===audioContext.state&&requestAnimationFrame(n)};s.start(),n()}function toggleOscilloscope(){oscilloscopeActive=!oscilloscopeActive}function activateOscilloscope(){oscilloscopeActive=!0}function disableOscilloscope(){oscilloscopeActive=!1}const oscilloscopeSliderInteger=document.getElementById("oscilloscope-slider-integer"),oscilloscopeSliderDecimal=document.getElementById("oscilloscope-slider-decimal"),oscilloscopeValueInteger=document.getElementById("oscilloscope-value-integer"),oscilloscopeValueDecimal=document.getElementById("oscilloscope-value-decimal");oscilloscopeSliderInteger.addEventListener("input",(e=>{oscilloscopeValueInteger.innerHTML=`${parseFloat(e.target.value)}`})),oscilloscopeSliderDecimal.addEventListener("input",(e=>{oscilloscopeValueDecimal.innerHTML=`.${parseFloat(e.target.value)}`}));