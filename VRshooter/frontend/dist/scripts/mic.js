const audioFileUrl="../assets/audio/ImperialMarch60.wav",audioContext=new(window.AudioContext||window.webkitAudioContext);function renderOscilloscope(t){const e=document.getElementById("oscilloscope-svg"),o=e.clientWidth,n=e.clientHeight;console.log("width",o),console.log("height",n),e.innerHTML="";const i=document.createElementNS("http://www.w3.org/2000/svg","polyline");i.setAttribute("fill","none"),i.setAttribute("stroke","white"),i.setAttribute("stroke-width","1"),e.appendChild(i);const c=audioContext.createAnalyser();c.fftSize=2048;const s=audioContext.createBufferSource();console.log("audioBuffer",t),s.buffer=t,s.connect(c),console.log("analyserNode2",c);const l=()=>{const t=new Float32Array(c.fftSize);c.getFloatTimeDomainData(t);const e=Math.floor(t.length/o),s=n/2;let a="";for(let i=0;i<o;i++){const o=(i+1)*e;let c=0;for(let n=i*e;n<o;n++){const e=Math.abs(t[n]);c=Math.max(c,e)}a+=`${i},${n/2-c*s} `}i.setAttribute("points",a),"running"===audioContext.state&&requestAnimationFrame(l)};s.start(),l()}const micButton=document.getElementById("mic-activate-button");micButton.addEventListener("click",(()=>{renderOscilloscope()}));