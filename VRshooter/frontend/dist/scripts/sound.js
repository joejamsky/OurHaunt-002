const audioFileUrl="./dist/assets/audio/ImperialMarch60.wav",audioContext=new(window.AudioContext||window.webkitAudioContext);function initAudio(){}function renderOscilloscope(){fetch(audioFileUrl).then((t=>t.arrayBuffer())).then((t=>audioContext.decodeAudioData(t))).then((t=>{const e=document.getElementById("oscilloscope-svg"),o=e.clientWidth,n=e.clientHeight;e.innerHTML="";const i=document.createElementNS("http://www.w3.org/2000/svg","polyline");i.setAttribute("fill","none"),i.setAttribute("stroke","white"),i.setAttribute("stroke-width","1"),e.appendChild(i);const r=audioContext.createAnalyser();r.fftSize=2048;const s=audioContext.createBufferSource();s.buffer=t,s.connect(r),r.connect(audioContext.destination);const a=()=>{const t=new Float32Array(r.fftSize);r.getFloatTimeDomainData(t);const e=Math.floor(t.length/o),s=n/2;let c="";for(let i=0;i<o;i++){const o=(i+1)*e;let r=0;for(let n=i*e;n<o;n++){const e=Math.abs(t[n]);r=Math.max(r,e)}c+=`${i},${n/2-r*s} `}i.setAttribute("points",c),"running"===audioContext.state&&requestAnimationFrame(a)};s.start(),a()})).catch((t=>console.error("Error loading audio:",t)))}const listenButton=document.getElementById("listen");listenButton.addEventListener("click",(()=>{renderOscilloscope()})),listenButton.addEventListener("touchstart",(()=>{renderOscilloscope()}));