const audioFileUrl="./assets/audio/ImperialMarch60.wav",audioContext=new(window.AudioContext||window.webkitAudioContext);function initAudio(){}function renderOscilloscope(){fetch(audioFileUrl).then((t=>t.arrayBuffer())).then((t=>audioContext.decodeAudioData(t))).then((t=>{const e=document.getElementById("oscilloscope-svg"),o=e.clientWidth,n=e.clientHeight;e.innerHTML="";const i=document.createElementNS("http://www.w3.org/2000/svg","polyline");i.setAttribute("fill","none"),i.setAttribute("stroke","white"),i.setAttribute("stroke-width","1"),e.appendChild(i);const a=audioContext.createAnalyser();a.fftSize=2048;const r=audioContext.createBufferSource();r.buffer=t,r.connect(a),a.connect(audioContext.destination);const c=()=>{const t=new Float32Array(a.fftSize);a.getFloatTimeDomainData(t);const e=Math.floor(t.length/o),r=n/2;let s="";for(let i=0;i<o;i++){const o=(i+1)*e;let a=0;for(let n=i*e;n<o;n++){const e=Math.abs(t[n]);a=Math.max(a,e)}s+=`${i},${n/2-a*r} `}i.setAttribute("points",s),"running"===audioContext.state&&requestAnimationFrame(c)};r.start(),c()})).catch((t=>console.error("Error loading audio:",t)))}const listenButton=document.getElementById("listen");listenButton.addEventListener("click",(()=>{renderOscilloscope()}));