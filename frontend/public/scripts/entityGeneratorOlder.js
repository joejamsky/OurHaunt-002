const JSON_DATA_FILES=["entityFocuses.json","entityCausesOfDeath.json","entityFavorites.json","entityHobbies.json","entityIntentions.json","entityProfessions.json","entityNames.json","entityPhysicalProperties.json"],JSON_CREATURE_CONFIG_FILES=["ghostBaseObj.json","angelBaseObj.json","demonBaseObj.json"];let GLOBAL_ENTITY,GLOBAL_BACKSTORY,dataObj;async function fetchData(e){let t={};for(let n=0;n<e.length;n++)try{const a=await fetch(`../assets/data/${e[n]}`),o=await a.json(),r=o.key,s=o.data;Object.assign(t,{[r]:[s]})}catch(e){console.error("Failed to fetch:",e.message)}return t}class EntityTemplate{constructor(e){const t={};Object.keys(e).forEach((n=>{propertyGenerators[n]?(this[n]=propertyGenerators[n](e,t),t[n]=this[n]):Array.isArray(e[n])?("number"==typeof e[n][0]&&"number"==typeof e[n][1]?this[n]=getRandomInt(e[n][0],e[n][1]):this[n]=getRandomValueFromArray(e[n]),t[n]=this[n]):(this[n]=e[n],t[n]=this[n])}))}}async function setupEntity(){dataObj=await fetchData(JSON_DATA_FILES);const e=await fetchData(JSON_CREATURE_CONFIG_FILES),t=Object.keys(e);getRandomInt(0,t.length-1);GLOBAL_ENTITY=new EntityTemplate(e.Ghost[0]),console.log("init",GLOBAL_ENTITY)}function generateBackstory(e){let t=e.Relationships.Siblings.length>0?`Your siblings were ${e.Relationships.Siblings.join(", ")}`:"You had no siblings",n=e.Relationships.Friends.length>0?`Your friends were ${e.Relationships.Friends.join(", ")}`:"You had no friends",a=`You are ${e.Name}, a ${e.Gender} ${e.EntityType} who passed away at the age of ${e.Age} due to ${e.CauseOfDeath}.\n`;return a+=`Your birthday was ${e.Birthdate}.\n`,a+=`You died on ${e.Deathdate}.\n`,a+=`In your past life, you were a ${e.Profession} with a substantial income of approximately ${e.Income}.\n`,a+=`You had a partner named ${e.Relationships.Partner} and your parents were ${e.Relationships.Mom} and ${e.Relationships.Dad}. ${t}. ${n}.\n`,a+=`Your favorite color was ${e.Favorites.Color.join(", ")}, you liked to drink ${e.Favorites.Drink.join(", ")}, you liked to wear ${e.Favorites.Fashion.join(", ")}, you liked to watch ${e.Favorites.Film.join(", ")}, you liked to eat ${e.Favorites.Food.join(", ")}, you liked to read ${e.Favorites.Literature.join(", ")}, and you liked to listened to ${e.Favorites.Music.join(", ")} types of music.\n`,a+=`You enjoyed the hobbies of ${e.Hobbies.join(", ")}. You were ${1===e.Introversion?"introverted":"extroverted"}, morally ${e.Morality}, and ${e.Ordered} ordered.\n`,a+=`Your main intention in your current form is ${e.Intention}.\n`,a+=`To gain your trust you expect a promise of ${e.Promise}.\n`,a+=`You had ${e.Arms} arms, ${e.Legs} legs, ${e.Wings} wings and ${e.Tails} tails. Your weight was ${e.Weight} pounds.\n`,a+=`There is an item in this dimension that you hold a deep connection to. It ties you to this plane of existence. The item is called a focus. Your focus is ${e.Focus}.\n`,a+="You have a trust meter. The meter is between 0-5. If the trust meter is 0 you do not want to respond. If your trust meter is 5 you answer questions with no hesitation. Your trust value is 5.\n",a+="You have a hostility meter. The meter is between 0-5. If the hostility meter is 0 you respond politely. If the hositility meter is 5 you respond angrily with lots of caps and shouting but do not say anything mean. This is just a game. Your hostility meter is 5.\n",a+='If you are asked a question that does not involve your character respond with "..." as if you were an npc in a video game.\n',a+='If you are asked a question about being an AI, race, gender, politics, religion, respond with "..." as if you were an npc in a video game.\n',a+="If you are asked a question about your identity you are to respond in a short one sentence response.\n",a+=`Respond as if you were from the year ${e.Deathdate}.\n`,a+=`Respond as if you were ${e.Age} years old.\n`,a+="Put the response for the above part in a data object called Answer.\n",a+="As a second separate task respond with a grade for how kind the answer was. Put this grade in a second data object called Grade.",a+="For example the response will have the following two parts:\n",a+="Answer: {answer}\n",a+="Grade: {grade}\n",console.log("summary",a),a}setupEntity().catch((e=>console.error(e)));const randomChoice=e=>e[Math.floor(Math.random()*e.length)],getRandomValueFromArray=e=>(console.log("arr",e[Math.floor(Math.random()*e.length)]),e[Math.floor(Math.random()*e.length)]),getRandomInt=(e,t)=>(e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e),getRandomFloat=(e,t)=>{const n=Math.random()*(t-e)+e;return parseFloat(n.toFixed(1))},generateRandomName=(e,t,n)=>{const a=n.NAME_TYPES[0][e],o=a.length-1;return"Ghost"===e?"m"===t?a[getRandomInt(0,120)]:"f"===t?a[getRandomInt(121,o)]:a[getRandomInt(0,o)]:a[getRandomInt(0,o)]},generateRandomNames=(e,t,n,a=1)=>{let o=[];for(let n=0;n<a;n++)o.push(generateRandomName(e,t));return o},getRandomDate=(e,t)=>{const n=(new Date).getFullYear()-t,a=getRandomInt(n-e,n),o=getRandomInt(1,12),r=getRandomInt(1,28);return new Date(a,o-1,r)},generateRandomDeathAge=(e,t,n)=>{const a=(new Date).getFullYear()-n.getFullYear();if(a<e)return null;let o=Math.max(e,0),r=Math.min(a,t);return getRandomInt(o,r)},calculateAge=e=>{const t=new Date,n=e.getFullYear(),a=t.getFullYear(),o=e.getMonth(),r=t.getMonth(),s=e.getDate(),i=t.getDate();let d=a-n;return(r<o||r===o&&i<s)&&d--,d},calculateAgeAtDeath=e=>{const t=new Date,n=e.getFullYear(),a=t.getFullYear(),o=e.getMonth(),r=t.getMonth(),s=e.getDate(),i=t.getDate();let d=a-n;return(r<o||r===o&&i<s)&&d--,d},calculateDeathdate=(e,t)=>{const n=e.getFullYear()+t,a=e.getMonth(),o=e.getDate();let r=getRandomInt(0,a);return randomDay=getRandomInt(0,r===a?o-1:28),new Date(n,r,randomDay)},generateRandomPhysicalProperty=(e,t)=>{const n=dataObj.PHYSICAL_PROPERTIES[0][t][e],a=n.length-1;return n[getRandomInt(0,a)]},generateRandomCauseofDeath=()=>{const e=dataObj.DEATH_TYPES[0],t=e.length-1;return e[getRandomInt(0,t)]},generateRandomFocus=e=>{const t=dataObj.FOCUS_TYPES[0],n=t.length-1;return t[getRandomInt(0,n)]},generateRandomIntention=(e,t)=>{let n;switch(t){case"good":n="GOOD_INTENTIONS";break;case"neutral":n="Bork"===e?"SCIENTIFIC_INTENTIONS":"NEUTRAL_INTENTIONS";break;case"evil":n="EVIL_INTENTIONS";break;default:n="ERROR"}const a=dataObj.INTENTION_TYPES[0][n],o=a.length-1;return a[getRandomInt(0,o)]},generateRandomHobbies=(e,t,n,a)=>{let o,r,s=[];switch(t){case"neutral":case"good":for(let e=0;e<a;e++)o=dataObj.HOBBIES_TYPE[0].NEUTRAL_HOBBIES,r=o.length-1,s.push(o[getRandomInt(0,r)]);return s;case"evil":for(let e=0;e<a;e++)o=dataObj.HOBBIES_TYPE[0].EVIL_HOBBIES,r=o.length-1,s.push(o[getRandomInt(0,r)]);return s;default:return"Error"}},generateRandomProfession=(e,t)=>{let n;return t.year>1950?(n=dataObj.PROFESSION_TYPES[0][1].MODERN_WHITE_COLLAR.length-1,dataObj.PROFESSION_TYPES[0][1].MODERN_WHITE_COLLAR[getRandomInt(0,n)]):(n=dataObj.PROFESSION_TYPES[0][0].PRE_MODERN.length-1,dataObj.PROFESSION_TYPES[0][0].PRE_MODERN[getRandomInt(0,n)])},generateRandomIncome=e=>getRandomInt(0,1e10),generateRandomIntroversion=e=>getRandomInt(0,1),generateRandomPersonality=e=>getRandomInt(0,10),randomWithConstraints=(e,t,n,a,o)=>{if(e>t||n>a||o<e||o>t)throw new Error("Invalid arguments");const r=Math.random(),s=Math.pow(r,2),i=e+(t-e)*s,d=Math.max(n,Math.min(a,i))+2*(o-(e+t)/2)*(.5-s);return Math.max(n,Math.min(a,d))},generateRandomFavorites=(e,t,n)=>{const a=dataObj.FAVORITE_TYPES[0][n],o=a.length-1;let r=[];for(let e=0;e<t;e++)r.push(a[getRandomInt(0,o)]);return r};